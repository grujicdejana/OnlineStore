<!DOCTYPE html>
<html>
<head>
    <meta charset="uft-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Jewelry Palace</title>
    <link href="https://fonts.googleapis.com/css2?family=Lemonada:wght@600&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Indie+Flower&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="styleCheckout.css">
</head>
<body>
    <header>
        <div>
            <h1>Jewelry Palace</h1>
            <p>Life isn't perfect but your jewelry can be.</p>  <br><br>    
        </div> 
    </header>

    <div class="container">
        <div class="container-checkout">
            <div class="text-style"> <!--div for free shipping, 2 years warranty-->
                <i class="fa fa-check"></i> <span> Free shipping</span>  <span style="color: transparent;">...</span>
                <i class="fa fa-check"></i> <span> 2 years warranty</span>
            </div>
    
            <div class="summary-order">
                <div class="div-form"> <!--div za formu-->
                    <div class="style-div">
                        <p>Shipping address</p>
                        <form class="form" id="form">
                            <div class="form-control">
                                <div class="field">
                                    <input type="text" placeholder="First name*" id="firstName">
                                    <br>
                                    <small>Error message</small>
                                </div>
                                
                                <div class="field">
                                    <input type="text" placeholder="Last name*" id=lastName>
                                    <br>
                                    <small>Error message</small>
                                </div>

                                <div class="field">
                                    <input type="text" placeholder="City*" id=city>
                                    <br>
                                    <small>Error message</small>
                                </div>

                                <div class="field">                                
                                    <input type="text" placeholder="Street and housenumber*" id="street">
                                    <br>
                                    <small>Error message</small>
                                </div>


                                <br>
                                <p>Contact information</p>

                                <div class="field" style="margin-top: -20px;">
                                    <input type="tel" placeholder="Phone*" id="phone">
                                    <br>
                                    <small>Error message</small>
                                </div>

                                <div class="field">
                                    <input type="email" placeholder="Email*" id="email">
                                    <br>
                                    <small>Error message</small>
                                </div>

           
                                <a href="bag.html">&lt; Return to cart</a>
                                <br><br>
                                <button type="submit">Place your order</button>
                            </div>
                        </form>
                    </div>
                </div>
        
                <div class="div-table"> <!--div za tabelarni prikaz-->
                    <div class="border">
                        <p>Your order</p>

                        <table class="table-style ">
                            <tr>
                                <td>
                                    <img src="images/earring1.jpg" alt="Butterfly earrings">
                                </td>
                                <td>
                                    <div>
                                        <p>Butterfly earrings</p><br><p>35$ x 1</p>  
                                    </div>       
                                </td>
                            </tr>
                
                            <tr>
                                <td>
                                    <img src="images/ring1.jpg" alt="Rose gold thin ring">
                                </td>
                                <td>
                                    <div>
                                        <p>Rose gold thin ring</p><br><p>90$ x 1</p>
                                    </div>
                                </td>
                            </tr>
                
                            <tr>
                                <td>
                                    <img src="images/necklaces2.jpg" alt="Rose gold double necklace">
                                </td>
                                <td>
                                    <div>
                                        <p>Double necklace</p><br><p>60$ x 1</p>
                                    </div>
                                </td>
                            </tr>
                        </table>

                        <div class="subtotal">
                            <span>Subtotal: 185$</span>
                        </div>
                    </div>
                </div>
            </div>            
        </div>
    </div>
</body>

<script>
    const form = document.getElementById('form');
    const firstname = document.getElementById('firstName');
    const lastname = document.getElementById('lastName');
    const city = document.getElementById('city');
    const address = document.getElementById('street');
    const phone = document.getElementById('phone');
    const email = document.getElementById('email');
 
    form.addEventListener('submit', (e) => {
        e.preventDefault();

        checkInputs();
    });

    function checkInputs(){
        const firstnameValue = firstname.value;
        const lastnameValue = lastname.value;
        const cityValue = city.value;
        const addressValue = address.value;
        const phoneValue = phone.value;
        const emailValue = email.value;

        var successName = false;
        var succesLastName = false;
        var succesCity = false;
        var successAddress = false;
        var successPhone = false;
        var successEmail = false;

        //validate for first name
        if(firstnameValue === '')
        {
            setErrorFor(firstname, 'First name cannot be blank');
            successName = false;
        }
        else if(!onlyLetter(firstnameValue)){
            setErrorFor(firstname, 'First name can only contain letter');
            successName = false;
        }
        else
        {
            setSuccessFor(firstname);
            successName = true;
        }

        //validate for last name
        if(lastnameValue === '')
        {
            setErrorFor(lastname, 'Last name cannot be blank');
            succesLastName = false;
        }
        else if(!onlyLetter(lastnameValue)){
            setErrorFor(lastname, 'Last name can only contain letter');
            succesLastName = false;
        }
        else
        {
            setSuccessFor(lastname);
            succesLastName = true;
        }

        //validate for city
        if(cityValue === '')
        {
            setErrorFor(city, 'City cannot be blank');
            succesCity = false;
        }
        else if(!onlyLetter(cityValue)){
            setErrorFor(city, 'City can only contain letter');
            succesCity = false;
        }
        else
        {
            setSuccessFor(city);
            succesCity = true;
        }

        //validate for address
        if(addressValue === '')
        {
            setErrorFor(address, 'Address cannot be blank');
            successAddress = false;
        }
        else
        {
            setSuccessFor(address);
            successAddress = true;
        }

        //validate for phone
        if(phoneValue === '')
        {
            setErrorFor(phone, 'Phone cannot be blank');
            successPhone = false;
        }
        else if(!onlyNumbers(phoneValue))
        {
            setErrorFor(phone, 'A number can only contain numbers (minimum 9 digits)');
            successPhone = false;
        }
        else
        {
            setSuccessFor(phone);
            successPhone = true;
        }

        //validate for email
        if(emailValue === '')
        {
            setErrorFor(email, 'Email cannot be blank');
            successEmail = false;
        }
        else if(!validateEmail(emailValue))
        {
            setErrorFor(email, 'Email is not valid');
            successEmail = false;
        }
        else
        {
            setSuccessFor(email);
            successEmail = true;
        }

        if(successName !== false && succesLastName !== false && succesCity !== false && successAddress !== false && successPhone !== false && successEmail !== false)
        {
            alert('Order shipped');
        }

    }

    function setErrorFor(input, message){
        const fieldDiv = input.parentElement;
        const small = fieldDiv.querySelector('small');

        small.innerText = message;

        fieldDiv.className = 'field error';
    }

    function setSuccessFor(input){
        const fieldDiv = input.parentElement;

        fieldDiv.className = 'field success';
    }

    function validateEmail(email) {
        const regex = /^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
        return regex.test(String(email).toLowerCase());
    }

    function onlyLetter(input){
        const regex = /^[a-zA-Z\s]+$/;
        return regex.test(input);
    }

    function onlyNumbers(input) {
        const regex = /^[0-9\s]{9,}/; //\s
        return regex.test(input);
    }

</script>

</html>